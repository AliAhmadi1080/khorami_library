{% extends 'adminbase.html' %}
{% load library_filters %} 
 {% block title %} نمایش امتیاز: {{user.fullname}} {% endblock title %}
{% block heading %} نمایش امتیاز: {{user.fullname}} {% endblock heading %} 

 {% block maincontent %}

<div >
    
  {% if scores %}
  <h2 class="text-2xl font-semibold text-gray-800 mb-4">امتیازات شخص:</h2>
  <div class="py-2 -my-2 overflow-x-auto sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8">
    <br />
    <div
      class="inline-block min-w-full overflow-hidden align-middle border-b border-gray-200 shadow sm:rounded-lg"
    >
      <table class="min-w-full">
        <thead>
          <tr>
            <th
              class="px-6 py-3 text-xs font-medium leading-4 tracking-wider text-right text-gray-500 uppercase border-b border-gray-200 bg-gray-50"
            >
              #
            </th>
            <th
              class="px-6 py-3 text-xs font-medium leading-4 tracking-wider text-right text-gray-500 uppercase border-b border-gray-200 bg-gray-50"
            >
              شماره ثبت
            </th>
            <th
              class="px-6 py-3 text-xs font-medium leading-4 tracking-wider text-right text-gray-500 uppercase border-b border-gray-200 bg-gray-50"
            >
              امتیاز
            </th>
            <th
              class="px-6 py-3 text-xs font-medium leading-4 tracking-wider text-right text-gray-500 uppercase border-b border-gray-200 bg-gray-50"
            >
              دلیل
            </th>

            <th
              class="px-6 py-3 text-xs font-medium leading-4 tracking-wider text-right text-gray-500 uppercase border-b border-gray-200 bg-gray-50"
            >
              تاریخ
            </th>
          </tr>
        </thead>

        <tbody class="bg-white">
          {% for score in scores %}

          <tr>
            <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
              {{forloop.counter}}
            </td>

            <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
              {{score.id}}
            </td>

            {% if score.score >= 0 %}
            <td
              class="px-6 py-4 text-green-400 whitespace-no-wrap border-b border-gray-200"
            >
              {{ score.score }}
            </td>
            {% else %}
            <td
              class="px-6 py-4 text-red-400 whitespace-no-wrap border-b border-gray-200"
            >
              {{ score.score }}
            </td>
            {% endif %}

            <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
              {{score.reason}}
            </td>

            <td class="px-6 py-4 whitespace-no-wrap border-b border-gray-200">
              {{score.date}}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {% else %}
  <p class="text-gray-600">برای شخص امتیازی ثبت نشده است.</p>
  {% endif %}

  
</div>
<hr>
<br>
<br>
<h2 class="text-2xl mt-10 text-black pb-6">ثبت امتیاز جدید</h2>
<form class="max-w-sm" action="" method="POST">
    {% csrf_token %}
    <div>
      <label
        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >دلیل</label
      >
      <input
        type="text"
        name="reason"
        required=""
        class="block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      />
    </div>
    <div>
      <label
        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        >امتیاز</label
      >
      <input
        type="number"
        name="score"
        required=""
        class="block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      />
    </div>

    <button
      type="submit"
      class="text-white mt-4 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
    >
      ثبت امتیاز
    </button>
    
  </form>
  {% if succses %}
      <div class="flex items-center justify-center">
        <div
          class="flex mt-4 h-9 px-2 flex-col bg-green-600 rounded-full text-white text-sm items-center justify-center"
        >
          عملیات با موفقیت انجام شد
        </div>
      </div>
      {% elif succses == 'false' %}
      <div class="flex items-center justify-center">
        <div
          class="flex mt-4 h-9 px-2 flex-col bg-red-600 rounded-full text-white text-sm items-center justify-center"
        >
          عملیات با موفقیت انجام نشد
        </div>
      </div>
      {% endif %}
{% endblock maincontent %}
